<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>入门 | RealmReactNative</title>
    <meta name="description" content="realm react native 中文文档">
    <link rel="icon" href="/RealmReactNative/favicon.ico">
    
    <link rel="preload" href="/RealmReactNative/assets/css/0.styles.f972d58f.css" as="style"><link rel="preload" href="/RealmReactNative/assets/js/app.e32c1127.js" as="script"><link rel="preload" href="/RealmReactNative/assets/js/3.5368bf32.js" as="script"><link rel="prefetch" href="/RealmReactNative/assets/js/2.61c5963e.js"><link rel="prefetch" href="/RealmReactNative/assets/js/4.48a5d109.js">
    <link rel="stylesheet" href="/RealmReactNative/assets/css/0.styles.f972d58f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/RealmReactNative/" class="home-link router-link-exact-active router-link-active"><!----><span class="site-name">
      RealmReactNative
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/RealmReactNative/" class="nav-link router-link-exact-active router-link-active">Getting Started</a></div><div class="nav-item"><a href="/RealmReactNative/introduce-realm-react-native/" class="nav-link">Introduce</a></div><a href="https://github.com/youngjuning/RealmReactNative" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/RealmReactNative/" class="nav-link router-link-exact-active router-link-active">Getting Started</a></div><div class="nav-item"><a href="/RealmReactNative/introduce-realm-react-native/" class="nav-link">Introduce</a></div><a href="https://github.com/youngjuning/RealmReactNative" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>入门</span><!----></p><ul class="sidebar-group-items"><li><a href="/RealmReactNative/#安装" class="sidebar-link">安装</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/RealmReactNative/#介绍" class="sidebar-link">介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/RealmReactNative/#示例" class="sidebar-link">示例</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#realm-studio" class="sidebar-link">Realm Studio</a></li></ul></li><li><a href="/RealmReactNative/#获取帮助" class="sidebar-link">获取帮助</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/RealmReactNative/#realms" class="sidebar-link">Realms</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/RealmReactNative/#打开-realms" class="sidebar-link">打开 Realms</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#默认-realm" class="sidebar-link">默认 Realm</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#打开一个同步的-realm" class="sidebar-link">打开一个同步的 Realm</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#其他-realm" class="sidebar-link">其他 Realm</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#schema-版本" class="sidebar-link">Schema 版本</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#同步打开-realms" class="sidebar-link">同步打开 Realms</a></li></ul></li><li><a href="/RealmReactNative/#模型" class="sidebar-link">模型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/RealmReactNative/#类" class="sidebar-link">类</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#支持的类型" class="sidebar-link">支持的类型</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#关系" class="sidebar-link">关系</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#默认属性值" class="sidebar-link">默认属性值</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#索引属性" class="sidebar-link">索引属性</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#主键" class="sidebar-link">主键</a></li></ul></li><li><a href="/RealmReactNative/#故障排除" class="sidebar-link">故障排除</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/RealmReactNative/#missing-realm-constructor" class="sidebar-link">Missing Realm Constructor</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#cannot-download-realm-sync-cocoa" class="sidebar-link">Cannot download realm-sync-cocoa</a></li><li class="sidebar-sub-header"><a href="/RealmReactNative/#崩溃报告" class="sidebar-link">崩溃报告</a></li></ul></li></ul></div></li></ul></div><div class="page"><div class="content"><h1 id="入门"><a href="#入门" aria-hidden="true" class="header-anchor">#</a> 入门</h1><h2 id="安装"><a href="#安装" aria-hidden="true" class="header-anchor">#</a> 安装</h2><p>按照下面的安装说明来通过 npm 来安装 Realm JavaScript，或者在 <a href="https://github.com/realm/realm-js" target="_blank" rel="noopener noreferrer">Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 上查看源码</p><p><strong>先决条件</strong></p><ul><li>确保你的环境可以开发 React Native 应用。如果没有请按照 <a href="https://facebook.github.io/react-native/docs/getting-started.html" target="_blank" rel="noopener noreferrer">React Native instructions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 入门。</li><li>Realm 是 iOS 和 Android 双平台兼容的。</li><li>支持 React Native 0.31.0 以上版本。</li></ul><p><strong>下载</strong></p><ul><li>创建一个新的 React Native 项目：</li></ul><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ react-native init <span class="token operator">&lt;</span>project-name<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>切换到项目目录下并添加 <code>realm</code> 依赖：</li></ul><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ yarn add realm
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>下一步，链接你的项目到 <code>realm</code> 到原生 module</li></ul><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ react-native <span class="token function">link</span> realm
<span class="token comment"># or rnpm link realm</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">Warning for Android</p><p>可能因为版本的原因，<code>react-native link</code> 可能生成一个不正确的配置，能够正确更新 Gradle（<code>android/settings.gradle</code>和<code>android/app/build.gradle</code>）,但是可能不会添加 Realm module。请确定 <code>react-native link</code> 已经添加了 Realm Module，如果没有的话请按照下面的步骤手动链接这个库。</p></div><ol><li>添加下面的代码到 <code>android/settings.gradle</code>：</li></ol><div class="language-js line-numbers-mode"><pre class="language-js"><code>include <span class="token string">':realm'</span>
<span class="token function">project</span><span class="token punctuation">(</span><span class="token string">':realm'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>projectDir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>rootProject<span class="token punctuation">.</span>projectDir<span class="token punctuation">,</span> <span class="token string">'../node_modules/realm/android'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li>添加下面的代码到 <code>android/app/build.gradle</code>：</li></ol><div class="language-js line-numbers-mode"><pre class="language-js"><code>dependencies <span class="token punctuation">{</span>
  compile <span class="token function">project</span><span class="token punctuation">(</span><span class="token string">':realm'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ol start="3"><li>在 <code>MainApplication.java</code> 中导入并链接包</li></ol><div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-java"><code><span class="token keyword">import</span> io<span class="token punctuation">.</span>realm<span class="token punctuation">.</span>react<span class="token punctuation">.</span>RealmReactPackage<span class="token punctuation">;</span> <span class="token comment">// add this import</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainApplication</span> <span class="token keyword">extends</span> <span class="token class-name">Application</span> <span class="token keyword">implements</span> <span class="token class-name">ReactApplication</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> List<span class="token generics function"><span class="token punctuation">&lt;</span>ReactPackage<span class="token punctuation">&gt;</span></span> <span class="token function">getPackages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> Arrays<span class="token punctuation">.</span><span class="token generics function"><span class="token punctuation">&lt;</span>ReactPackage<span class="token punctuation">&gt;</span></span><span class="token function">asList</span><span class="token punctuation">(</span>
      <span class="token keyword">new</span> <span class="token class-name">MainReactPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token keyword">new</span> <span class="token class-name">RealmReactPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// add this line</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>你现在已经准备好了。可以使用 realm 开始你的表演了，请用下面的代码替换 <code>App.js</code> 中的代码：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Realm <span class="token keyword">from</span> <span class="token string">'realm'</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span>Component<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>View<span class="token punctuation">,</span> Text<span class="token punctuation">,</span> StyleSheet<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-native'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">class</span> <span class="token class-name">App</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token punctuation">{</span>
      realm<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      schema<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Dog'</span><span class="token punctuation">,</span> properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>realm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        realm<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'Dog'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Rex'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> realm <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> info <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>realm
      <span class="token operator">?</span> <span class="token template-string"><span class="token string">`Number of dogs in this Realm: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>realm<span class="token punctuation">.</span><span class="token function">objects</span><span class="token punctuation">(</span><span class="token string">'Dog'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span>
      <span class="token punctuation">:</span> <span class="token string">'Loading...'</span>

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>View style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>container<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>Text style<span class="token operator">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>welcome<span class="token punctuation">}</span><span class="token operator">&gt;</span>
          <span class="token punctuation">{</span>info<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Text<span class="token operator">&gt;</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>View<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> styles <span class="token operator">=</span> StyleSheet<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  container<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    flex<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
    justifyContent<span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>
    alignItems<span class="token punctuation">:</span> <span class="token string">'center'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  welcome<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    color<span class="token punctuation">:</span> <span class="token string">'red'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h2 id="介绍"><a href="#介绍" aria-hidden="true" class="header-anchor">#</a> 介绍</h2><p>Realm JavaScript使您能够以安全，持久和快速的方式高效地编写应用程序的模型层。它被设计来和 React Native 和 Node.js 一起工作。</p><p><strong>这是一个简单的例子：</strong></p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> Realm <span class="token keyword">from</span> <span class="token string">'realm'</span>

<span class="token comment">// 定义你的模型和它们的属性</span>
<span class="token keyword">const</span> CarSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Car'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    make<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
    model<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
    miles<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'int'</span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Person'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
    birthday<span class="token punctuation">:</span> <span class="token string">'date'</span><span class="token punctuation">,</span>
    cars<span class="token punctuation">:</span> <span class="token string">'Car[]'</span><span class="token punctuation">,</span>
    picture<span class="token punctuation">:</span> <span class="token string">'data?'</span> <span class="token comment">// 可选的属性</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>CarSchema<span class="token punctuation">,</span> PersonSchema<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>realm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 创建 Realm 对象并且写入到本地存储（local storage）</span>
  realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myCar <span class="token operator">=</span> realm<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'Car'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      make<span class="token punctuation">:</span> <span class="token string">'宝马'</span><span class="token punctuation">,</span>
      model<span class="token punctuation">:</span> <span class="token string">'X3'</span><span class="token punctuation">,</span>
      miles<span class="token punctuation">:</span> <span class="token number">1000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    myCar<span class="token punctuation">.</span>miles <span class="token operator">+=</span> <span class="token number">20</span> <span class="token comment">// 更新一个属性值（实时）</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token comment">// 查询 Realm 中 所有高里程的车辆</span>
  <span class="token keyword">const</span> cars <span class="token operator">=</span> realm<span class="token punctuation">.</span><span class="token function">objects</span><span class="token punctuation">(</span><span class="token string">'Car'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filtered</span><span class="token punctuation">(</span><span class="token string">'miles &gt; 1000'</span><span class="token punctuation">)</span>

  <span class="token comment">// 将会返回一个对象，这个对象只有一辆车</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>cars<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">// =&gt; 1</span>

  <span class="token comment">// 添加另一辆车</span>
  realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> myCar <span class="token operator">=</span> realm<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'Car'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      make<span class="token punctuation">:</span> <span class="token string">'宝马'</span><span class="token punctuation">,</span>
      model<span class="token punctuation">:</span> <span class="token string">'X5'</span><span class="token punctuation">,</span>
      miles<span class="token punctuation">:</span> <span class="token number">2000</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h3 id="示例"><a href="#示例" aria-hidden="true" class="header-anchor">#</a> 示例</h3><p>示例可以在 GitHub 找到： <a href="http://t.cn/RexLGDh" target="_blank" rel="noopener noreferrer">realm-js repository<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><blockquote><p>Note on Android：你需要下载 NDK并且设置正确的 <code>Android_NDK</code> 环境变量。</p></blockquote><ul><li>macos：<code>export ANDROID_NDK=/usr/local/Cellar/android-ndk/r10e</code></li><li>windows: <a href="https://github.com/youngjuning/issue-blog/issues/153" target="_blank" rel="noopener noreferrer">NDK 环境搭建<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><h3 id="realm-studio"><a href="#realm-studio" aria-hidden="true" class="header-anchor">#</a> Realm Studio</h3><p><a href="https://realm.io/products/realm-studio/" target="_blank" rel="noopener noreferrer">Realm Studio<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是我们的首选开发人员工具，可以轻松管理Realm数据库和Realm平台。使用 Realm Studio，你可以打开并且编辑本地和已同步的 Realms，并且管理任何 Realm Object Server 实例。它支持 Mac、Windows和Linux。</p><p><img src="https://i.loli.net/2018/07/28/5b5c2a2b9ccd0.png" alt="Realm Studio"></p><ul><li>Mac：<a href="https://studio-releases.realm.io/latest/download/mac-dmg?_ga=2.193430958.2002032254.1532599846-1966751907.1532599846" target="_blank" rel="noopener noreferrer">Download for Mac<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>Linux：<a href="https://studio-releases.realm.io/latest/download/linux-appimage?_ga=2.125249801.2002032254.1532599846-1966751907.1532599846" target="_blank" rel="noopener noreferrer">Download for Linux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li>Windows：<a href="https://studio-releases.realm.io/latest/download/win-setup?_ga=2.125249801.2002032254.1532599846-1966751907.1532599846" target="_blank" rel="noopener noreferrer">Download for Linux<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><h2 id="获取帮助"><a href="#获取帮助" aria-hidden="true" class="header-anchor">#</a> 获取帮助</h2><ul><li>写代码遇到问题？ <a href="http://stackoverflow.com/questions/ask?tags=realm" target="_blank" rel="noopener noreferrer">Ask on StackOverflow<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。我们积极地在 SO 监控和回答问题</li><li>上报一个BUG？ <a href="https://github.com/realm/realm-js/issues/new" target="_blank" rel="noopener noreferrer">Open an issue on our repo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。如果需要，请包含 Realm 的版本号，一个完整的日志， Realm 文件和一个能复现你问题的demo</li><li>有新功能需求？<a href="https://github.com/realm/realm-js/issues/new" target="_blank" rel="noopener noreferrer">Open an issue on our repo<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。告诉我们你想要的功能和为什么想要。</li></ul><p>如果你正在使用一个 <strong>crash reporter</strong>（比如 Crashlytics 和 HockeyApp），确保开启了日志收集。当抛出一个异常并且发生不可恢复的情况时Realm 会记录元信息（不包括用户数据），并且这些信息能够在需要时帮你调试定位问题。</p><h2 id="realms"><a href="#realms" aria-hidden="true" class="header-anchor">#</a> Realms</h2><h3 id="打开-realms"><a href="#打开-realms" aria-hidden="true" class="header-anchor">#</a> 打开 Realms</h3><p>打开一个 Realm 只需要简单地执行 Realm 类的静态方法 <code>open</code>。你需要传递一个配置对象给 <code>open</code> 方法。我们在上面的例子中已经看到了一个包含 <code>schema</code> 的配置对象：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Get the default Realm with support for our objects</span>
Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>Car<span class="token punctuation">,</span> Person<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>realm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...use the realm instance here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Handle the error here if something went wrong</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>关于配置对象的详细信息请查看API索引 <a href="http://t.cn/RelKD6G" target="_blank" rel="noopener noreferrer">Configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。除了 <code>schema</code> 以外，还有一些常见的属性：</p><ul><li><code>path</code>：指定 <a href="http://t.cn/Rel9QKH" target="_blank" rel="noopener noreferrer">另一个Realm<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 的路径</li><li><code>migration</code>：一个 <a href="http://t.cn/Rel9eUJ" target="_blank" rel="noopener noreferrer">migration function<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li><code>sync</code>：一个 <a href="http://t.cn/RelCzNF" target="_blank" rel="noopener noreferrer">sync object<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，用来同步打开一个带有 Object Server 的 Realm</li><li><code>inMemory</code>：Realm 将在内存中被打开，并且对象不是永久的。一旦最后一个 Realm 实例被关闭，所有的对象都会消失</li><li><code>deleteRealmIfMigrationNeeded</code>：当需要迁移时删除Realm。这在开发中很有用，因为数据模型可能经常变化</li><li><code>schemaVersion</code>：指定 schema 的版本</li></ul><h3 id="默认-realm"><a href="#默认-realm" aria-hidden="true" class="header-anchor">#</a> 默认 Realm</h3><p>你可能已经注意到先前的所有示例中都省略了 <code>path</code> 参数。这种情况下，会使用默认的 Realm path。你可以使用全局变量 <code>Realm.defaultPath</code> 来访问和改变默认的 Realm path。</p><h3 id="打开一个同步的-realm"><a href="#打开一个同步的-realm" aria-hidden="true" class="header-anchor">#</a> 打开一个同步的 Realm</h3><p>打开一个同步的Realm和打开任何一个其他的Realm是一样的。如果你需要配置同步化，你可以给 <a href="http://t.cn/RelKD6G" target="_blank" rel="noopener noreferrer">Configuration<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 添加一个 <code>sync</code> 属性。 <code>sync</code> 的可选属性包括：</p><ul><li><code>error</code>：一个处理和报告错误的回调</li><li><code>validate_ssl</code>：表明是否 SSL 证书必须被验证</li><li><code>ssl_trust_certificate_path</code>：一个查找可信任 SSL 证书的地址</li></ul><p>错误处理的方式是在配置中注册一个回调函数：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Dog <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Dog'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'string'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">{</span>
  schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>Dog<span class="token punctuation">]</span><span class="token punctuation">,</span>
  sync<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    user<span class="token punctuation">:</span> userA<span class="token punctuation">,</span>
    url<span class="token punctuation">:</span> realmUrl<span class="token punctuation">,</span>
    error<span class="token punctuation">:</span> err <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> realm <span class="token operator">=</span> Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>realm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...use the realm instance here</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>error <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Handle the error here if something went wrong</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h3 id="其他-realm"><a href="#其他-realm" aria-hidden="true" class="header-anchor">#</a> 其他 Realm</h3><p>在不同的位置持有多个Realm是非常有用的。例如，你可能想要在主Realm之外打包应用的一些数据到 Realm 文件中。你可以在初始化你的 realm 时指定一个 <code>path</code> 参数。所有的 path 都是应用可写目录的相对路：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// Open a realm at another path</span>
Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  path<span class="token punctuation">:</span> <span class="token string">'anotherRealm.realm'</span><span class="token punctuation">,</span>
  schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>CarSchema<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="schema-版本"><a href="#schema-版本" aria-hidden="true" class="header-anchor">#</a> Schema 版本</h3><p>打开一个 Realm 时另一个可用的选项是 <code>schemaVersion</code>。当省略时， <code>schemaVersion</code> 属性的值默认是 <code>0</code>。当初始化一个已经存在的Realm，并且这个它的 <code>schema</code> 和之前定义的不一样，你需要指定 <code>schemaVersion</code>。如果 <code>schema</code> 被更新并且没有指定 <code>schemaVersion</code>，会抛出一个异常。</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Person'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'string'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">// schemaVersion defaults to 0</span>
Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>PersonSchema<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>如果你过了一会秀了下操作：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> UpdatedPersonSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// schema name 相同，所以之前在Realm中的 `Person` 对象将被更新</span>
  name<span class="token punctuation">:</span> <span class="token string">'Person'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
    dog<span class="token punctuation">:</span> <span class="token string">'Dog'</span> <span class="token comment">// new property</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 这里会抛出错误，因为 shema 已经被更新了，但是 `schemaVersion` 没有指定</span>
Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>UpdatedPersonSchema<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// 这里将会成功并且更新 Realm 到新版本</span>
Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>UpdatedPersonSchema<span class="token punctuation">]</span><span class="token punctuation">,</span> schemaVersion<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>如果你希望检索当前 schema 的版本，你可以使用 <code>Realm.schemaVersion</code> 方法：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> currentVersion <span class="token operator">=</span> Realm<span class="token punctuation">.</span><span class="token function">schemaVersion</span><span class="token punctuation">(</span>Realm<span class="token punctuation">.</span>defaultPath<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="同步打开-realms"><a href="#同步打开-realms" aria-hidden="true" class="header-anchor">#</a> 同步打开 Realms</h3><p>你可以通过简单地调用构造函数并传入一个配置对象给它来创建一个 realm 实例。通常不推荐这样做，因为它会阻塞并且可能是耗时的操作。特别是正在运行 <a href="http://t.cn/Rel9eUJ" target="_blank" rel="noopener noreferrer">Migrations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 或者 realm 实例是 <a href="http://t.cn/RelCzNF" target="_blank" rel="noopener noreferrer">synchronized<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>，并且你不希望在数据没有完全下载好之前冒险修改它。</p><p>如果你坚持这么做，语法很简单：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> realm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Realm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>PersonSchema<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// You can now access the realm instance.</span>
realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>如果 Realm 的 <a href="http://t.cn/Rel13kK" target="_blank" rel="noopener noreferrer">permissions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是 <code>read-only</code>，那么你必须使用异步的API来打开它。使用上面的语法打开 <code>read-only</code> Realm 将会导致错误。</p></div><h2 id="模型"><a href="#模型" aria-hidden="true" class="header-anchor">#</a> 模型</h2><p>Realm 数据模型由初始化期间传递到 Realm 的 schema 信息所定义。一个对象的 schema 由 <code>name</code> 和一些属性组成。要么每一个属性都有一个 <code>name</code>，并由一个包含属性类型的字符串描述。要么是一个包含 <code>name</code>,<code>type</code>,<code>objectType</code>,<code>optional</code>,<code>default</code> 和 <code>indexed</code> 字段的对象。</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> Realm <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'realm'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> CarSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Car'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    make<span class="token punctuation">:</span>  <span class="token string">'string'</span><span class="token punctuation">,</span>
    model<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
    miles<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'int'</span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Person'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span>     <span class="token string">'string'</span><span class="token punctuation">,</span>
    birthday<span class="token punctuation">:</span> <span class="token string">'date'</span><span class="token punctuation">,</span>
    cars<span class="token punctuation">:</span>     <span class="token string">'Car[]'</span>
    picture<span class="token punctuation">:</span>  <span class="token string">'data?'</span><span class="token punctuation">,</span> <span class="token comment">// 可选的属性</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">// Initialize a Realm with Car and Person models</span>
Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>CarSchema<span class="token punctuation">,</span> PersonSchema<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>realm <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ... use the realm instance to read and modify data</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="类"><a href="#类" aria-hidden="true" class="header-anchor">#</a> 类</h3><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>在这里，通过类来定义模型是被限制的。 它在 React Native 环境下下可以工作，但是在 Node 环境不行。</p></div><p>如果你想要使用 ES2015 类（并且可能希望继承已经存在的特性），你只需要在构造器中定义 schema：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">fullName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>firstName <span class="token operator">+</span> <span class="token string">' '</span> <span class="token operator">+</span> <span class="token keyword">this</span><span class="token punctuation">.</span>lastName
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
Person<span class="token punctuation">.</span>schema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Person'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
    lastName<span class="token punctuation">:</span> <span class="token string">'string'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>你现在可以把类本身传递给 open configuration 的 <code>shema</code> 属性：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code>Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>Person<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>你可以一如既往地访问属性：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code>realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> john <span class="token operator">=</span> realm<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    firstName<span class="token punctuation">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span>
    lastName<span class="token punctuation">:</span> <span class="token string">'Smith'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  john<span class="token punctuation">.</span>lastName <span class="token operator">=</span> <span class="token string">'Peterson'</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>john<span class="token punctuation">.</span>fullName<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// -&gt; 'John Peterson'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="支持的类型"><a href="#支持的类型" aria-hidden="true" class="header-anchor">#</a> 支持的类型</h3><p>Reamlm 支持一下基本的类型： <code>bool</code>，<code>int</code>，<code>float</code>，<code>double</code>，<code>string</code>，<code>data</code> 和 <code>date</code>。</p><ul><li><code>bool</code> 相当于 JavaScript的 <code>boolean</code> 类型</li><li><code>int</code>，<code>float</code> 和 <code>double</code> 属性相当于 JavaScript 的 <code>number</code> 类型。<code>int</code> 和 <code>double</code> 被存储为64位， <code>float</code> 被存储为32位</li><li><code>string</code> 属性相当于 JavaScript 的 <code>string</code> 类型</li><li><code>data</code> 属性相当于 JavaScript 的 <code>ArrayBuffer</code> 类型</li><li><code>date</code> 属性相当于 JavaScript 的 <code>date</code> 类型</li></ul><p>当简写一个基本属性时，你可以只指定类型：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> CarSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Car'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// The following property types are equivalent</span>
    make<span class="token punctuation">:</span>   <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    model<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="可选的属性"><a href="#可选的属性" aria-hidden="true" class="header-anchor">#</a> 可选的属性</h4><p>默认地，基本类型不是必需的并且不能存储 <code>null</code> 和 <code>undefined</code>。在你定义属性时，属性可以通过指定一个 <code>optional</code> 代号变成可选的。或者使用简写符号：给类型名追加一个 <code>?</code>：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Person'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    realName<span class="token punctuation">:</span>    <span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token comment">// 必需属性</span>
    displayName<span class="token punctuation">:</span> <span class="token string">'string?'</span><span class="token punctuation">,</span> <span class="token comment">// 可选属性</span>
    birthday<span class="token punctuation">:</span>    <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'date'</span><span class="token punctuation">,</span> optional<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">// 可选属性</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> realm <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Realm</span><span class="token punctuation">(</span><span class="token punctuation">{</span>schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>PersonSchema<span class="token punctuation">,</span> CarSchema<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可选属性在创建的时候可以被设置为 null 或 undefined</span>
  <span class="token keyword">let</span> charlie <span class="token operator">=</span> realm<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    realName<span class="token punctuation">:</span> <span class="token string">'Charlie'</span><span class="token punctuation">,</span>
    displayName<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// 也可以完全被省略</span>
    birthday<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token number">1995</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 可以属性可以被设置为 null、undefined，或者被设置为一个新的非空值</span>
  charlie<span class="token punctuation">.</span>birthday <span class="token operator">=</span> undefined
  charlie<span class="token punctuation">.</span>displayName <span class="token operator">=</span> <span class="token string">'Charles'</span>

  <span class="token comment">// 设置一个非可选的属性为null将抛出类型错误</span>
  <span class="token comment">// charlie.realName = null</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h4 id="列表属性"><a href="#列表属性" aria-hidden="true" class="header-anchor">#</a> 列表属性</h4><p>除了存储单独的值，属性也可以被声明为一个包含任何支持的基本类型的列表。只需要给类型名追加 <code>[]</code>：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Person'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
    testScores<span class="token punctuation">:</span> <span class="token string">'double?[]'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>PersonSchema<span class="token punctuation">,</span> CarSchema<span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>realm<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> charlie <span class="token operator">=</span> realm<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'Person'</span><span class="token punctuation">,</span><span class="token punctuation">{</span>
      name<span class="token punctuation">:</span> <span class="token string">'Charlie'</span><span class="token punctuation">,</span>
      testScores<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">100.0</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// Charlie 在第二次测试时缺考了，所以允许跳过</span>
    charlie<span class="token punctuation">.</span>testScores<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span>

    <span class="token comment">// 之后第三次考试成绩不理想</span>
    charlie<span class="token punctuation">.</span>testScores<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">70.0</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><p>当访问列表属性会返回一个 <code>List</code> 对象。 <code>List</code> 对象的方法和 JavaScript 的数组方法非常像。最大的不同是任何改变都会被持久化到底层的 Realm，并且它们只能在 write 操作中被修改。另外， <code>List</code> 对象是从基础对象中获取的，你只能通过访问用该属性的对象访问，而不能手动创建。</p><p>虽然list属性中的值可以是可选的，但list属性本身不能。给 list 属性指定 <code>optional</code> 将会把 list 中的值变成可选的</p><h3 id="关系"><a href="#关系" aria-hidden="true" class="header-anchor">#</a> 关系</h3><h4 id="一对一"><a href="#一对一" aria-hidden="true" class="header-anchor">#</a> 一对一</h4><p>对于一对一关系，你可以将指定的对象的模式的 <code>name</code>作为属性的类型：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Person'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// 下面的属性定义是等价的</span>
    car<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'Car'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    van<span class="token punctuation">:</span> <span class="token string">'Car'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>当使用对象属性时，你需要确保所有引用的类型存在于用于打开 Realm 的模式中：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 尽管 PersonSchema 中包含属性类型 `Car`， CarSchemas 还是必需的</span>
Realm<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token punctuation">{</span>schema<span class="token punctuation">:</span> <span class="token punctuation">[</span>CarSchema<span class="token punctuation">,</span> PersonSchema<span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>访问对象属性时，可以使用常规属性语法访问嵌套属性：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code>realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameString <span class="token operator">=</span> person<span class="token punctuation">.</span>car<span class="token punctuation">.</span>name
  person<span class="token punctuation">.</span>car<span class="token punctuation">.</span>miles <span class="token operator">=</span> <span class="token number">1100</span>

  <span class="token comment">// 创建一个新的 Car</span>
  person<span class="token punctuation">.</span>van <span class="token operator">=</span> <span class="token punctuation">{</span>make<span class="token punctuation">:</span> <span class="token string">'Ford'</span><span class="token punctuation">,</span> model<span class="token punctuation">:</span> <span class="token string">'Transit'</span><span class="token punctuation">}</span>

  <span class="token comment">// 设置两个属性为相同的汽车实例</span>
  person<span class="token punctuation">.</span>car <span class="token operator">=</span> person<span class="token punctuation">.</span>van
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在Realm中对象属性总是可选的，不需要明确指定，并且不能被设置为必需的。</p><h4 id="一对多"><a href="#一对多" aria-hidden="true" class="header-anchor">#</a> 一对多</h4><p>与基本属性一样，你也可以使用对象列表来形成多对多关系：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> PersonSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Person'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    cars<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'list'</span><span class="token punctuation">,</span> objectType<span class="token punctuation">:</span> <span class="token string">'Car'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    vans<span class="token punctuation">:</span> <span class="token string">'Car[]'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> carList <span class="token operator">=</span> person<span class="token punctuation">.</span>cars

<span class="token comment">// Add new cars to the list</span>
realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 列表必须要在 write 事务中处理</span>
  carList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>make<span class="token punctuation">:</span> <span class="token string">'Honda'</span><span class="token punctuation">,</span> model<span class="token punctuation">:</span> <span class="token string">'Accord'</span><span class="token punctuation">,</span> miles<span class="token punctuation">:</span> <span class="token number">100</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  carList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>make<span class="token punctuation">:</span> <span class="token string">'Toyota'</span><span class="token punctuation">,</span> model<span class="token punctuation">:</span> <span class="token string">'Prius'</span><span class="token punctuation">,</span> miles<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> secondCar <span class="token operator">=</span> carList<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>model<span class="token punctuation">;</span>  <span class="token comment">// 通过数组下标访问</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>与其他列表和一对一关系不同，多对多关系不能是可选的。</p><h4 id="反向关系"><a href="#反向关系" aria-hidden="true" class="header-anchor">#</a> 反向关系</h4><div class="warning custom-block"><p class="custom-block-title">暂未翻译</p><p><a href="https://realm.io/docs/javascript/latest#to-many-relationships" target="_blank" rel="noopener noreferrer">https://realm.io/docs/javascript/latest#to-many-relationships<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div><h3 id="默认属性值"><a href="#默认属性值" aria-hidden="true" class="header-anchor">#</a> 默认属性值</h3><p>默认属性值可以在属性定义时通过 <code>default</code> 代号指定。要使用默认值，请在对象创建期间保留未指定的属性。</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> CarSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Car'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    make<span class="token punctuation">:</span>  <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    model<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    drive<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">'fwd'</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    miles<span class="token punctuation">:</span> <span class="token punctuation">{</span>type<span class="token punctuation">:</span> <span class="token string">'int'</span><span class="token punctuation">,</span>    <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

realm<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 因为省略了 `miles` 因此默认为 `0`</span>
  <span class="token comment">// 因为 `drive` 被指定, 所以会重写默认值</span>
  realm<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token string">'Car'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>make<span class="token punctuation">:</span> <span class="token string">'Honda'</span><span class="token punctuation">,</span> model<span class="token punctuation">:</span> <span class="token string">'Accord'</span><span class="token punctuation">,</span> drive<span class="token punctuation">:</span> <span class="token string">'awd'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="索引属性"><a href="#索引属性" aria-hidden="true" class="header-anchor">#</a> 索引属性</h3><p>你可以给属性添加 <code>indexed</code> 代号来使它可以被索引。这个操作被 <code>int</code>、<code>string</code>、<code>bool</code> 和 <code>date</code> 属性支持：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> BookSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Book'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    name<span class="token punctuation">:</span> <span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span> indexed<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    price<span class="token punctuation">:</span> <span class="token string">'float'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>当以较慢的插入为大家比较属性相等性时，索引属性将大大加快查询，</p><h3 id="主键"><a href="#主键" aria-hidden="true" class="header-anchor">#</a> 主键</h3><p>你可以再 对象模型中给 <code>string</code>、<code>int</code> 类型的属性指定 <code>primaryKey</code> 属性。声明主键可以有效地查找和更新对象，并为每个值强制实现唯一性。一旦一个带有主键的对象被添加到 Realm，主键就不能被改变了。</p><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> BookSchema <span class="token operator">=</span> <span class="token punctuation">{</span>
  name<span class="token punctuation">:</span> <span class="token string">'Book'</span><span class="token punctuation">,</span>
  primaryKey<span class="token punctuation">:</span> <span class="token string">'id'</span><span class="token punctuation">,</span>
  properties<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    id<span class="token punctuation">:</span> <span class="token string">'int'</span><span class="token punctuation">,</span> <span class="token comment">// 主键</span>
    title<span class="token punctuation">:</span> <span class="token string">'string'</span><span class="token punctuation">,</span>
    price<span class="token punctuation">:</span> <span class="token string">'float'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>主键属性自动被索引</p><h2 id="故障排除"><a href="#故障排除" aria-hidden="true" class="header-anchor">#</a> 故障排除</h2><h3 id="missing-realm-constructor"><a href="#missing-realm-constructor" aria-hidden="true" class="header-anchor">#</a> Missing Realm Constructor</h3><p>如果你的 app 崩溃了，并且告诉你 <code>Realm constructor was not found</code>,你可以试试下面的方法</p><p>首先执行 <code>react-native link realm</code>，如果还是没有帮助，那么你的问题是因为安卓，试试：</p><p>把 <code>java import io.realm.react.RealmReactPackage;</code> 加入你的 <code>MainApplication.java</code> 文件</p><p>添加 <code>RealmReactPackage</code> 到包列表中：</p><div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">protected</span> List <span class="token function">getPackages</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Arrays<span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">MainReactPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token keyword">new</span> <span class="token class-name">RealmReactPackage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// add this line</span>
  <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>把下面的两行加到 <code>settings.gradle</code>：</p><div class="language-js line-numbers-mode"><pre class="language-js"><code>include <span class="token string">':realm'</span>
<span class="token function">project</span><span class="token punctuation">(</span><span class="token string">':realm'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>projectDir <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span>settingsDir<span class="token punctuation">,</span> <span class="token string">'../node_modules/realm/android'</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如果你的问题是IOS，那么试试：</p><ol><li>关闭所有模拟器/设备构建</li><li>停止在终端中运行的程序包管理器（或者更好的是，只需重新启动终端）</li><li>在查找程序中打开应用程序根目录中的ios文件夹。</li><li>进入构建文件夹（注意：你不会在atom中看到这个构建文件夹，所以只需右键单击ios并在finder中单击open）</li><li>删除构建文件夹内的所有内容（只需移动到垃圾箱并保留垃圾）</li><li>运行 <code>react-native run-ios</code> 重新构建</li></ol><h3 id="cannot-download-realm-sync-cocoa"><a href="#cannot-download-realm-sync-cocoa" aria-hidden="true" class="header-anchor">#</a> Cannot download realm-sync-cocoa</h3><p>我们已经看到一些报告，由于下载问题，用户无法构建他们的应用程序。症状是您看到类似的错误消息 <code>Error: unexpected end of file at Zlib.zlibOnError [as onerror] (zlib.js:142:17) errno: -5, code: 'Z_BUF_ERROR' }.</code></p><p>可以手动下载所需的文件，然后构建应用程序。步骤是：</p><ol><li>找到您的项目目录，然后找到 <code>node_modules/realm/vendor/realm-ios</code>。它会是空的。</li><li>使用以下命令创建文件 <code>download-realm.lock</code> : <code>echo SYNC_SERVER_FOLDER=sync SYNC_ARCHIVE=realm-sync-cocoa-3.7.0.tar.gz SYNC_ARCHIVE_ROOT=core &gt; download-realm.lock</code>。版本号（此处为3.7.0）必须与更改日志中的Realm Sync版本匹配。</li><li>找到下载的文件<code>realm-sync-cocoa-3.7.0.tar.gz</code>， 执行命令 <code>tar -xzvf realm-sync-cocoa-3.7.0.tar.gz -C yourProjectDirectory/node_modules/realm/vendor/realm-ios</code>.</li><li>你会发现该目录不再是空的。复制目录下的所有文件core并将其粘贴到目录下 <code>yourProjectDirectory/node_modules/realm/vendor/realm-ios</code>.</li></ol><h3 id="崩溃报告"><a href="#崩溃报告" aria-hidden="true" class="header-anchor">#</a> 崩溃报告</h3><p>我们鼓励您在应用程序中使用崩溃报告器。许多Realm操作可能在运行时失败（与任何其他磁盘IO一样），因此从应用程序收集崩溃报告将有助于确定您（或我们）可以改进错误处理和修复崩溃错误的区域。</p><p>大多数商业崩溃记者都可以选择收集日志。我们强烈建议您启用此功能。在抛出异常和不可恢复的情况时，Realm会记录元数据信息（但没有用户数据），这些消息可以在出现问题时帮助调试。</p></div><div class="page-edit"><div class="edit-link"><a href="https://github.com/youngjuning/RealmReactNative/edit/master/docs/README.md" target="_blank" rel="noopener noreferrer">帮助我们改善此页面！</a><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div><div class="last-updated"><span class="prefix">Last Updated: </span><span class="time">7/31/2018, 6:00:21 PM</span></div></div><!----></div></div></div>
    <script src="/RealmReactNative/assets/js/3.5368bf32.js" defer></script><script src="/RealmReactNative/assets/js/app.e32c1127.js" defer></script>
  </body>
</html>
